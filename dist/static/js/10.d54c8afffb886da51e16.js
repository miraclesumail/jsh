webpackJsonp([10],{"2ztI":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),i=a("NYxO"),r={name:"schedule",data:function(){return{}},props:["current","max"],methods:{},created:function(){console.log(this.max)}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule"},[a("div",{staticClass:"progressbox"},[a("div",{staticClass:"progressbar"},[a("div",{staticClass:"garden start"}),t._v(" "),a("div",{staticClass:"garden end"}),t._v(" "),a("div",{staticClass:"current",style:{left:(t.current/t.max).toPercent()}},[t._v(t._s(t.current.toFixed(2)||"0"))]),t._v(" "),a("div",{staticClass:"progress",style:{width:(t.current/t.max).toPercent()}})]),t._v(" "),a("div",{staticClass:"range"},[a("div",{staticClass:"fl"},[t._v("0")]),t._v(" "),a("div",{staticClass:"fr"},[t._v(t._s(Number(t.max).toFixed(2)))])])])])},staticRenderFns:[]};var c={name:"withdrawal",data:function(){return{sendData:{amount:""},freeTimes:"",serviceCharge:0,xima:0,withdrawals:0,lockList:[],setting:{min:100,max:2e5,balanceMax:1e6}}},components:{Schedule:a("VU/8")(r,o,!1,function(t){a("HsfZ")},"data-v-285b76b1",null).exports},methods:n()({},Object(i.b)(["setWallet"]),{send:function(){var t=this,e=Number(this.sendData.amount),a=this.setting,s="";e<a.min&&(s="最低提款金额为100元"),!s&&e>a.max&&(s="单笔提款最高20万"),!s&&(this.limit<e||0==this.limit)&&(s="本次提款余额不足，请核实"),!s&&a.balanceMax<e&&(s="当日最高提款为100万<br/>您当日已提款成功"+(1e6-a.balanceMax)+"元，还可以提款金额为"+a.balanceMax+"元"),s?this.$tool.CONFIRM({text:s}):this.$api.applyBonus({bonusId:1,amount:e}).then(function(e){t.$tool.ALERT({text:"提款提交成功，请留意支付状态"}),t.init(),t.sendData.amount=""})},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setWallet(),this.$api.getBonusRequestList({startTime:new Date((new Date).setHours(0,0,0,0))}).then(function(a){(a.data.records||[]).map(function(a,s){e&&["Pending","AutoAudit"].includes(a.status)&&t.$tool.CONFIRM({text:"您已有一笔提款申请",okName:"前往查看",noName:"取消上一笔",okFun:function(){t.$router.push({path:"/account/search",query:{type:"全部",nav:1}})},noFun:function(){t.$api.cancelBonusRequest({proposalId:a.proposalId}).then(function(e){t.$tool.ALERT({text:"取消成功"}),t.init()})}}),"Success"==a.status&&(t.balanceMax-=Number(a.data.amount))})}),this.$api.getWithdrawalInfo().then(function(e){t.freeTimes=e.data.freeTimes,t.serviceCharge=e.data.serviceCharge,t.xima=e.data.ximaWithdraw;var a=e.data,s=[];a.freeAmount&&s.push({name:"大厅锁定",lockAmount:a.freeAmount,currentLockAmount:a.currentFreeAmount}),s=s.concat(a.lockList),t.lockList=s})}}),mounted:function(){var t=this;this.player.bankAccount?this.init(1):this.$tool.CONFIRM({text:"您的银行卡尚未绑定，请前往绑定",okName:"前往绑定",okFun:function(){t.$router.push("/account/modifyBank")}})},computed:n()({},Object(i.d)(["player","wallet"]),{limit:function(){return this.xima+(this.lockList.length?0:this.wallet.totalCredit)}})},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"withdrawal"},[a("crumbs",{attrs:{icon:"icon_tikuan",title:"申请提款"}}),t._v(" "),a("div",{staticClass:"box"},[a("ul",{staticClass:"info"},[a("li",[t._v("额度："+t._s(t.wallet.totalCredit)+"元")]),t._v(" "),a("li",[t._v("免费次数："+t._s(t.freeTimes||0)+" 次")]),t._v(" "),a("li",[t._v("可提额度："),a("span",{staticClass:"red"},[t._v(t._s(t.limit.decimals())+"元")])]),t._v(" "),a("li",[t._v("提款费率："+t._s(100*t.serviceCharge)+"%")])]),t._v(" "),t._l(t.lockList,function(e,s){return a("div",{key:s,staticClass:"scbox"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),a("Schedule",{attrs:{max:e.lockAmount,current:e.currentLockAmount}})],1)})],2),t._v(" "),a("div",{staticClass:"form_box2"},[a("div",{staticClass:"item item_input",attrs:{flex:"box:first cross:center"}},[a("div",{staticClass:"name"},[t._v("游戏账号")]),t._v(" "),a("div",{staticClass:"text_box",attrs:{flex:"cross:center"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.player.name,expression:"player.name"}],staticClass:"disable",attrs:{type:"text",placeholder:"请输入存款金额"},domProps:{value:t.player.name},on:{input:function(e){e.target.composing||t.$set(t.player,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item item_input",attrs:{flex:"box:first cross:center"}},[a("div",{staticClass:"name"},[t._v("提款金额")]),t._v(" "),a("div",{staticClass:"text_box",attrs:{flex:"cross:center"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sendData.amount,expression:"sendData.amount"}],attrs:{type:"tel",maxlength:"10",placeholder:"请输入提款金额"},domProps:{value:t.sendData.amount},on:{input:function(e){e.target.composing||t.$set(t.sendData,"amount",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item item_btn"},[a("div",{staticClass:"btn",on:{click:t.send}},[t._v("提交申请")])])])],1)},staticRenderFns:[]},u=a("VU/8")(c,l,!1,null,null,null);e.default=u.exports},HsfZ:function(t,e){}});