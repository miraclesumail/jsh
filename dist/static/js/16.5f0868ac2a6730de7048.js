webpackJsonp([16],{F4KB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),a=i("NYxO"),c={name:"notice",data:function(){return{noticeList:[]}},props:[],components:{},methods:s()({},Object(a.b)(["setUnreadMail"]),{clearn:function(t){var e=this,i=t._id;if(i)this.$api.deleteMail({mailObjId:i}).then(function(i){e.noticeList.remove(t)});else for(var n=this.noticeList.length,s=function(t){var i=e.noticeList[t];e.$api.deleteMail({mailObjId:e.noticeList[t]._id}).then(function(t){e.noticeList.remove(i),e.noticeList.length})},a=0;a<n;a++)s(a)},goDoticeDetails:function(t){this.$tool.CONFIRM({text:"<h3>"+t.title+"</h3>"+t.content}),t.hasBeenRead||this.$api.readMail({mailObjId:t._id}).then(function(e){t.hasBeenRead=!0})}}),mounted:function(){var t=this;this.$api.getMailList().then(function(e){t.noticeList=e.data||[],t.noticeList.sort(function(t,e){return!0})})},computed:s()({},Object(a.d)(["user","unreadMail"]))},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"msg"},[i("crumbs",{attrs:{icon:"icon_email",title:"消息"}}),t._v(" "),t.noticeList.length?i("div",{staticClass:"table_box"},[i("table",[t._m(0),t._v(" "),t._l(t.noticeList,function(e,n){return i("tr",{key:n},[i("td",{staticClass:"delete",on:{click:function(i){t.clearn(e)}}},[i("span",{staticClass:"icon_cha"})]),t._v(" "),i("td",{staticClass:"title text_md",on:{click:function(i){t.goDoticeDetails(e)}}},[i("div",{attrs:{flex:"box:first cross:center"}},[i("div",{class:e.hasBeenRead?"icon_email_no":"icon_email"}),t._v(" "),i("span",{staticClass:"text nowrap"},[t._v(t._s(e.title))])])]),t._v(" "),i("td",{staticClass:"datatime text_md"},[t._v(t._s(e.createTime.getDate().substring(0,10)))])])})],2),t._v(" "),i("div",{staticClass:"btn",on:{click:t.clearn}},[t._v("清空")])]):i("div",{staticClass:"nomail"},[t._v("无信息!")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("删除")]),this._v(" "),e("th",[this._v("主题")]),this._v(" "),e("th",[this._v("时间")])])])}]},l=i("VU/8")(c,o,!1,null,null,null);e.default=l.exports}});